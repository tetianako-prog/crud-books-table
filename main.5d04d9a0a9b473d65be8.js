(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{Kx2E:function(t,n,e){var l=e("mp5j");t.exports=(l.default||l).template({1:function(t,n,e,l,o){var a,r=null!=n?n:t.nullContext||{},i=t.hooks.helperMissing,d="function",u=t.escapeExpression,c=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"<tr data-index="+u(typeof(a=null!=(a=c(e,"idx")||(null!=n?c(n,"idx"):n))?a:i)===d?a.call(r,{name:"idx",hash:{},data:o,loc:{start:{line:2,column:15},end:{line:2,column:22}}}):a)+'>\r\n  <th scope="row">'+u(typeof(a=null!=(a=c(e,"idx")||(null!=n?c(n,"idx"):n))?a:i)===d?a.call(r,{name:"idx",hash:{},data:o,loc:{start:{line:3,column:18},end:{line:3,column:25}}}):a)+'</th>\r\n  <td><input type="text" value="'+u(typeof(a=null!=(a=c(e,"title")||(null!=n?c(n,"title"):n))?a:i)===d?a.call(r,{name:"title",hash:{},data:o,loc:{start:{line:4,column:32},end:{line:4,column:41}}}):a)+'" class="title-input" disabled /></td>\r\n  <td><input type="text" value="'+u(typeof(a=null!=(a=c(e,"author")||(null!=n?c(n,"author"):n))?a:i)===d?a.call(r,{name:"author",hash:{},data:o,loc:{start:{line:5,column:32},end:{line:5,column:42}}}):a)+'" disabled /></td>\r\n  <td><input type="text" value="'+u(typeof(a=null!=(a=c(e,"genres")||(null!=n?c(n,"genres"):n))?a:i)===d?a.call(r,{name:"genres",hash:{},data:o,loc:{start:{line:6,column:32},end:{line:6,column:42}}}):a)+'" disabled /></td>\r\n  <td><input type="text" value="'+u(typeof(a=null!=(a=c(e,"rating")||(null!=n?c(n,"rating"):n))?a:i)===d?a.call(r,{name:"rating",hash:{},data:o,loc:{start:{line:7,column:32},end:{line:7,column:42}}}):a)+'" disabled /></td>\r\n  <td><button data-id='+u(typeof(a=null!=(a=c(e,"id")||(null!=n?c(n,"id"):n))?a:i)===d?a.call(r,{name:"id",hash:{},data:o,loc:{start:{line:8,column:22},end:{line:8,column:28}}}):a)+' type="button" class="btn btn-danger remove-btn">Удалить</button></td>\r\n  <td><button data-id='+u(typeof(a=null!=(a=c(e,"id")||(null!=n?c(n,"id"):n))?a:i)===d?a.call(r,{name:"id",hash:{},data:o,loc:{start:{line:9,column:22},end:{line:9,column:28}}}):a)+" data-idx="+u(typeof(a=null!=(a=c(e,"idx")||(null!=n?c(n,"idx"):n))?a:i)===d?a.call(r,{name:"idx",hash:{},data:o,loc:{start:{line:9,column:38},end:{line:9,column:45}}}):a)+' type="button" class="btn btn-primary edit-btn">Редактировать</button></td>\r\n</tr>\r\n'},compiler:[8,">= 4.3.0"],main:function(t,n,e,l,o){var a;return null!=(a=(t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]})(e,"each").call(null!=n?n:t.nullContext||{},n,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:1,column:0},end:{line:11,column:9}}}))?a:""},useData:!0})},L1EO:function(t,n,e){},QfWi:function(t,n,e){"use strict";e.r(n);e("L1EO"),e("JBxO"),e("FdtR");var l={getBooks:function(){return fetch("http://localhost:3000/books").then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},addBook:function(t){return fetch("http://localhost:3000/books",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"}})},deleteBook:function(t){return fetch("http://localhost:3000/books/"+t,{method:"DELETE"})},updateBook:function(t,n){return fetch("http://localhost:3000/books/"+t,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json; charset=UTF-8"}})}},o=(e("lmye"),e("wCa+"),e("Kx2E")),a=e.n(o),r={container:document.querySelector(".container"),table:document.querySelector("table"),addButton:document.querySelector(".add")};var i=function(t){var n=t.map((function(t,n){return Object.assign({},t,{idx:n+1})})),e=a()(n);r.container.innerHTML="",r.container.insertAdjacentHTML("beforeend",e)},d=e("rsPG"),u=e.n(d);e("Muwe"),e("aZFp");var c=function(t){return{title:t.children[1].firstChild.value,author:t.children[2].firstChild.value,genres:t.children[3].firstChild.value.split(","),rating:t.children[4].firstChild.value}};var s=function(t){if(""===t.children[1].firstChild.value||""===t.children[2].firstChild.value||""===t.children[3].firstChild.value||""===t.children[4].firstChild.value)return!0};l.getBooks().then(i);var h=!1;r.addButton.addEventListener("click",(function(){if(h){var t=document.querySelector(".new-row");if(s(t))return void alert("Заполните все поля");l.addBook(c(t)).then((function(t){t.ok&&l.getBooks().then(i)})).catch((function(t){return console.log(t)})),h=!1,r.addButton.textContent="Добавить"}else{h=!0,r.addButton.textContent="Cохранить";var n=u()();r.container.insertAdjacentHTML("beforeend",n)}}));var p=!1;r.table.addEventListener("click",(function(t){if("BUTTON"===t.target.nodeName){if(t.target.classList.contains("remove-btn")){var n=t.target.dataset.id;l.deleteBook(n).then((function(t){t.ok&&l.getBooks().then(i)})).catch((function(t){return console.log(t)}))}if(t.target.classList.contains("edit-btn")){var e=t.target.dataset.idx,o=t.target.dataset.id,a=document.querySelector('[data-index="'+e+'"]');if(p){if(s(a))return void alert("Заполните все поля");l.updateBook(o,c(a)).then((function(t){t.ok&&l.getBooks().then(i)})).catch((function(t){return console.log(t)})),p=!1,t.target.textContent="Редактировать"}else{for(var r=1;r<5;r+=1)a.children[r].firstChild.disabled=!1;t.target.textContent="Сохранить",p=!0}}}}))},rsPG:function(t,n,e){var l=e("mp5j");t.exports=(l.default||l).template({compiler:[8,">= 4.3.0"],main:function(t,n,e,l,o){return'<tr class="new-row">\r\n  <td></td>\r\n  <td><input type="text" value="" /></td>\r\n  <td><input type="text" value="" /></td>\r\n  <td><input type="text" value="" /></td>\r\n  <td><input type="text" value="" /></td>\r\n</tr>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.5d04d9a0a9b473d65be8.js.map